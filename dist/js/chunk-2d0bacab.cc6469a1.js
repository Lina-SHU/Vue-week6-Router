(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0bacab"],{"395d":function(t,e,c){"use strict";c.r(e);var o=c("7a23"),a=Object(o["createVNode"])("div",{class:"container py-5"},[Object(o["createVNode"])("ol",{class:"form-row text-center pl-0 d-flex",style:{"list-style":"none"}},[Object(o["createVNode"])("li",{class:"col-12 col-md-4"},[Object(o["createVNode"])("div",{class:"alert alert-info rounded-pill mb-0 ",role:"alert"}," 1.輸入訂購資料 ")]),Object(o["createVNode"])("li",{class:"col-12 col-md-4"},[Object(o["createVNode"])("div",{class:"alert alert-light rounded-pill mb-0 ",role:"alert"}," 2.訂購人資訊填寫 ")]),Object(o["createVNode"])("li",{class:"col-12 col-md-4"},[Object(o["createVNode"])("div",{class:"alert alert-light rounded-pill mb-0",role:"alert"}," 3.完成 ")])])],-1),n=Object(o["createVNode"])("h2",{class:"text-center text-secondary my-3"},"購物車列表",-1),r={class:"table"},l=Object(o["createVNode"])("thead",null,[Object(o["createVNode"])("tr",{class:"text-center"},[Object(o["createVNode"])("th",{scope:"col",width:"10%"}),Object(o["createVNode"])("th",{scope:"col",width:"20%"},"商品圖片"),Object(o["createVNode"])("th",{scope:"col"},"商品名稱"),Object(o["createVNode"])("th",{scope:"col",width:"15%"},"商品數量"),Object(o["createVNode"])("th",{scope:"col"},"商品價格")])],-1),s={key:0},i=Object(o["createVNode"])("tr",null,[Object(o["createVNode"])("td",{colspan:"5",class:"text-center py-5"},"購物車是空的唷！")],-1),d={class:"text-center"},u={class:"text-center"},b={class:"input-group mb-3"},p={class:"text-end"},h={class:"h4"},O=Object(o["createVNode"])("td",{colspan:"4",class:"text-end"},"總金額：",-1),j={class:"text-end"},V={class:"d-flex justify-content-end"};function g(t,e,c,g,N,f){var m=Object(o["resolveComponent"])("loading");return Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],null,[a,n,N.carts.carts&&N.carts.carts.length>=2?(Object(o["openBlock"])(),Object(o["createBlock"])("button",{key:0,type:"button",class:"btn btn-danger mb-3",onClick:e[1]||(e[1]=function(){return f.deleteAllCart&&f.deleteAllCart.apply(f,arguments)})},"刪除所有商品")):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(m,{active:N.isLoading},null,8,["active"]),Object(o["createVNode"])("table",r,[l,N.carts.carts&&0===N.carts.carts.length?(Object(o["openBlock"])(),Object(o["createBlock"])("tbody",s,[i])):(Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],{key:1},[Object(o["createVNode"])("tbody",null,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(N.carts.carts,(function(t){return Object(o["openBlock"])(),Object(o["createBlock"])("tr",{key:t.product_id,class:"align-middle"},[Object(o["createVNode"])("td",d,[Object(o["createVNode"])("button",{type:"button",class:"btn btn-outline-danger",onClick:function(e){return f.deleteCart(t.id)}},"刪除",8,["onClick"])]),Object(o["createVNode"])("td",u,[Object(o["createVNode"])("img",{src:t.product.imageUrl,alt:"pic",class:"img-fiuld",style:{"background-position":"center center","object-fit":"cover"},width:"200",height:"100"},null,8,["src"])]),Object(o["createVNode"])("td",null,Object(o["toDisplayString"])(t.product.title),1),Object(o["createVNode"])("td",null,[Object(o["createVNode"])("div",b,[Object(o["createVNode"])("button",{class:"btn btn-outline-secondary shadow-none",type:"button",disabled:t.qty<=1,onClick:function(e){return f.updateCart(t,"minus")}}," - ",8,["disabled","onClick"]),Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"number",min:"1",class:"form-control",disabled:"","onUpdate:modelValue":function(e){return t.qty=e}},null,8,["onUpdate:modelValue"]),[[o["vModelText"],t.qty]]),Object(o["createVNode"])("button",{class:"btn btn-outline-secondary shadow-none",type:"button",onClick:function(e){return f.updateCart(t,"plus")}}," + ",8,["onClick"])])]),Object(o["createVNode"])("td",p,Object(o["toDisplayString"])(t.final_total),1)])})),128))]),Object(o["createVNode"])("tfoot",null,[Object(o["createVNode"])("tr",h,[O,Object(o["createVNode"])("td",j,Object(o["toDisplayString"])(N.carts.final_total),1)])])],64))]),Object(o["createVNode"])("div",V,[Object(o["createVNode"])("button",{type:"button",class:"btn btn-primary btn-lg",onClick:e[2]||(e[2]=function(){return f.goToOrder&&f.goToOrder.apply(f,arguments)})},"確認訂購")])],64)}c("99af");var N=c("1940"),f=c.n(N),m={data:function(){return{carts:[],isLoading:!1}},methods:{getCart:function(){var t=this;this.isLoading=!0;var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("linachen","/cart");this.$http.get(e).then((function(e){e.data.success&&(t.carts=e.data.data,t.isLoading=!1)}))},deleteCart:function(t){var e=this;this.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("linachen","/cart/").concat(t);this.$http.delete(c).then((function(t){t.data.success&&(e.getCart(),e.isLoading=!1,f()({text:"商品刪除囉~",buttons:!1,timer:1e3}))}))},deleteAllCart:function(){var t=this;this.isLoading=!0;var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("linachen","/carts");this.$http.delete(e).then((function(e){e.data.success&&(t.getCart(),t.isLoading=!1,f()({text:"購物車清空囉！~",buttons:!1,timer:1e3}),setTimeout((function(){t.$router.push("/products")}),1e3))}))},updateCart:function(t,e){var c=this;"minus"===e?t.qty-=1:"plus"===e&&(t.qty+=1);var o="".concat("https://vue3-course-api.hexschool.io/","api/").concat("linachen","/cart/").concat(t.id);this.$http.put(o,{data:{product_id:t.id,qty:t.qty}}).then((function(t){t.data.success&&c.getCart()}))},goToOrder:function(){var t=this;if(this.carts.carts&&0===this.carts.carts.length)return f()({text:"購物車不能是空的唷！~",icon:"error",buttons:!1,timer:2e3}),void setTimeout((function(){t.$router.push("/products")}),1e3);this.$router.push("/orders")}},mounted:function(){this.getCart()}};m.render=g;e["default"]=m}}]);
//# sourceMappingURL=chunk-2d0bacab.cc6469a1.js.map