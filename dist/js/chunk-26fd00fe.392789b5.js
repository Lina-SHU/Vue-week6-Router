(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-26fd00fe"],{"395d":function(t,e,c){"use strict";c.r(e);var a=c("7a23"),o=Object(a["createVNode"])("div",{class:"container py-5"},[Object(a["createVNode"])("ol",{class:"form-row text-center pl-0 d-flex",style:{"list-style":"none"}},[Object(a["createVNode"])("li",{class:"col-12 col-md-4"},[Object(a["createVNode"])("div",{class:"alert alert-info rounded-pill mb-0 ",role:"alert"}," 1.輸入訂購資料 ")]),Object(a["createVNode"])("li",{class:"col-12 col-md-4"},[Object(a["createVNode"])("div",{class:"alert alert-light rounded-pill mb-0 ",role:"alert"}," 2.訂購人資訊填寫 ")]),Object(a["createVNode"])("li",{class:"col-12 col-md-4"},[Object(a["createVNode"])("div",{class:"alert alert-light rounded-pill mb-0",role:"alert"}," 3.完成 ")])])],-1),n=Object(a["createVNode"])("h2",{class:"text-center text-secondary my-3"},"購物車列表",-1),r={class:"table"},s=Object(a["createVNode"])("thead",null,[Object(a["createVNode"])("tr",{class:"text-center"},[Object(a["createVNode"])("th",{scope:"col",width:"10%"}),Object(a["createVNode"])("th",{scope:"col",width:"20%"},"商品圖片"),Object(a["createVNode"])("th",{scope:"col"},"商品名稱"),Object(a["createVNode"])("th",{scope:"col",width:"15%"},"商品數量"),Object(a["createVNode"])("th",{scope:"col"},"商品價格")])],-1),l={key:0},i=Object(a["createVNode"])("tr",null,[Object(a["createVNode"])("td",{colspan:"5",class:"text-center py-5"},"購物車是空的唷！")],-1),d={class:"text-center"},u={class:"text-center"},b={class:"input-group mb-3"},p={class:"text-end"},h={class:"h4"},O=Object(a["createVNode"])("td",{colspan:"4",class:"text-end"},"總金額：",-1),j={class:"text-end"},f={class:"d-flex justify-content-end"};function g(t,e,c,g,m,V){var N=Object(a["resolveComponent"])("loading");return Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],null,[o,n,m.carts.carts&&m.carts.carts.length>=2?(Object(a["openBlock"])(),Object(a["createBlock"])("button",{key:0,type:"button",class:"btn btn-danger mb-3",onClick:e[1]||(e[1]=function(){return V.deleteAllCart&&V.deleteAllCart.apply(V,arguments)})},"刪除所有商品")):Object(a["createCommentVNode"])("",!0),Object(a["createVNode"])(N,{active:m.isLoading},null,8,["active"]),Object(a["createVNode"])("table",r,[s,m.carts.carts&&0===m.carts.carts.length?(Object(a["openBlock"])(),Object(a["createBlock"])("tbody",l,[i])):(Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],{key:1},[Object(a["createVNode"])("tbody",null,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(m.carts.carts,(function(t){return Object(a["openBlock"])(),Object(a["createBlock"])("tr",{key:t.product_id,class:"align-middle"},[Object(a["createVNode"])("td",d,[Object(a["createVNode"])("button",{type:"button",class:"btn btn-outline-danger",onClick:function(e){return V.deleteCart(t.id)}},"刪除",8,["onClick"])]),Object(a["createVNode"])("td",u,[Object(a["createVNode"])("img",{src:t.product.imageUrl,alt:"pic",class:"img-fiuld",style:{"background-position":"center center","object-fit":"cover"},width:"200",height:"100"},null,8,["src"])]),Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(t.product.title),1),Object(a["createVNode"])("td",null,[Object(a["createVNode"])("div",b,[Object(a["createVNode"])("button",{class:"btn btn-outline-secondary shadow-none",type:"button",disabled:t.qty<=1,onClick:function(e){return V.updateCart(t,"minus")}}," - ",8,["disabled","onClick"]),Object(a["withDirectives"])(Object(a["createVNode"])("input",{type:"number",min:"1",class:"form-control",disabled:"","onUpdate:modelValue":function(e){return t.qty=e}},null,8,["onUpdate:modelValue"]),[[a["vModelText"],t.qty]]),Object(a["createVNode"])("button",{class:"btn btn-outline-secondary shadow-none",type:"button",onClick:function(e){return V.updateCart(t,"plus")}}," + ",8,["onClick"])])]),Object(a["createVNode"])("td",p,Object(a["toDisplayString"])(t.final_total),1)])})),128))]),Object(a["createVNode"])("tfoot",null,[Object(a["createVNode"])("tr",h,[O,Object(a["createVNode"])("td",j,Object(a["toDisplayString"])(m.carts.final_total),1)])])],64))]),Object(a["createVNode"])("div",f,[Object(a["createVNode"])("button",{type:"button",class:"btn btn-primary btn-lg",onClick:e[2]||(e[2]=function(){return V.goToOrder&&V.goToOrder.apply(V,arguments)})},"確認訂購")])],64)}c("99af");var m=c("1940"),V=c.n(m),N=c("83c5"),y={data:function(){return{carts:[],isLoading:!1}},methods:{getCart:function(){var t=this;this.isLoading=!0;var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("linachen","/cart");this.$http.get(e).then((function(e){e.data.success&&(t.carts=e.data.data,t.isLoading=!1)}))},deleteCart:function(t){var e=this;this.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("linachen","/cart/").concat(t);this.$http.delete(c).then((function(t){if(t.data.success)return e.getCart(),V()({text:"商品刪除囉~",buttons:!1,timer:1e3}),e.$http.get("".concat("https://vue3-course-api.hexschool.io/","api/").concat("linachen","/cart"))})).then((function(t){t.data.success&&(e.isLoading=!1,N["a"].emit("cart-number",t.data.data.carts.length))}))},deleteAllCart:function(){var t=this;this.isLoading=!0;var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("linachen","/carts");this.$http.delete(e).then((function(e){if(e.data.success)return t.getCart(),V()({text:"購物車清空囉！~",buttons:!1,timer:1e3}),setTimeout((function(){t.$router.push("/products")}),1e3),t.$http.get("".concat("https://vue3-course-api.hexschool.io/","api/").concat("linachen","/cart"))})).then((function(e){e.data.success&&(t.isLoading=!1,N["a"].emit("cart-number",e.data.data.carts.length))}))},updateCart:function(t,e){var c=this;"minus"===e?t.qty-=1:"plus"===e&&(t.qty+=1);var a="".concat("https://vue3-course-api.hexschool.io/","api/").concat("linachen","/cart/").concat(t.id);this.$http.put(a,{data:{product_id:t.id,qty:t.qty}}).then((function(t){t.data.success&&c.getCart()}))},goToOrder:function(){var t=this;if(this.carts.carts&&0===this.carts.carts.length)return V()({text:"購物車不能是空的唷！~",icon:"error",buttons:!1,timer:2e3}),void setTimeout((function(){t.$router.push("/products")}),1e3);this.$router.push("/orders")}},mounted:function(){this.getCart()}};y.render=g;e["default"]=y},"83c5":function(t,e,c){"use strict";var a=function(t){return{all:t=t||new Map,on:function(e,c){var a=t.get(e);a&&a.push(c)||t.set(e,[c])},off:function(e,c){var a=t.get(e);a&&a.splice(a.indexOf(c)>>>0,1)},emit:function(e,c){(t.get(e)||[]).slice().map((function(t){t(c)})),(t.get("*")||[]).slice().map((function(t){t(e,c)}))}}};e["a"]=a()}}]);
//# sourceMappingURL=chunk-26fd00fe.392789b5.js.map