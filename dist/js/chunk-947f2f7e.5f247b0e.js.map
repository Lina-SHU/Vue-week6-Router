{"version":3,"sources":["webpack:///./src/components/Pagination.vue","webpack:///./src/components/Pagination.vue?f819","webpack:///./src/views/Products.vue?dd43","webpack:///./node_modules/mitt/dist/mitt.es.js","webpack:///./src/components/bus.js","webpack:///./src/views/Products.vue","webpack:///./src/views/Products.vue?95da"],"names":["class","pages","has_pre","$emit","current_page","total_pages","page","key","has_next","props","data","watch","pagination","this","render","all","n","Map","on","t","e","i","get","push","set","off","splice","indexOf","emit","slice","map","mitt","style","active","isLoading","products","item","id","goToProduct","src","imageUrl","alt","title","origin_price","price","type","addCart","getProducts","components","methods","url","$http","then","res","success","bus","carts","length","catch","err","console","log","$router","post","product_id","qty","text","icon","buttons","timer","created"],"mappings":"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","file":"js/chunk-947f2f7e.5f247b0e.js","sourcesContent":["<template>\r\n  <div class=\"container my-2\">\r\n    <nav>\r\n      <ul class=\"pagination justify-content-center\">\r\n        <li class=\"page-item\" :class=\"{ disabled: !pages.has_pre }\">\r\n          <button class=\"page-link\" @click.prevent=\"$emit('getProducts', pages.current_page-1)\">上一頁</button>\r\n        </li>\r\n        <li class=\"page-item\" v-for=\"page in pages.total_pages\" :key=\"page\" :class=\"{ active: page === pages.current_page }\"><button class=\"page-link\" @click.prevent=\"$emit('getProducts', page)\">{{ page }}</button></li>\r\n        <li class=\"page-item\" :class=\"{ disabled: !pages.has_next }\">\r\n          <button class=\"page-link\" @click.prevent=\"$emit('getProducts', pages.current_page+1)\">下一頁</button>\r\n        </li>\r\n      </ul>\r\n    </nav>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: ['pagination'],\r\n  data () {\r\n    return {\r\n      pages: {}\r\n    }\r\n  },\r\n  watch: {\r\n    pagination () {\r\n      this.pages = this.pagination\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./Pagination.vue?vue&type=template&id=0e99de9a\"\nimport script from \"./Pagination.vue?vue&type=script&lang=js\"\nexport * from \"./Pagination.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Products.vue?vue&type=style&index=0&id=95e99e60&lang=css\"","export default function(n){return{all:n=n||new Map,on:function(t,e){var i=n.get(t);i&&i.push(e)||n.set(t,[e])},off:function(t,e){var i=n.get(t);i&&i.splice(i.indexOf(e)>>>0,1)},emit:function(t,e){(n.get(t)||[]).slice().map(function(n){n(e)}),(n.get(\"*\")||[]).slice().map(function(n){n(t,e)})}}}\n//# sourceMappingURL=mitt.es.js.map\n","import mitt from 'mitt'\r\nexport default mitt()\r\n","<template>\r\n  <loading :active=\"isLoading\"></loading>\r\n  <div class=\"container\">\r\n    <div class=\"row mt-5\">\r\n      <div class=\"col-md-4 col-lg-3 mb-3\" v-for=\"item in products\" :key=\"item.id\">\r\n        <div class=\"d-flex justify-content-center\">\r\n          <div class=\"card\" style=\"width: 18rem;\">\r\n            <div class=\"image\" @click=\"goToProduct(item.id)\">\r\n              <img :src=\"item.imageUrl\" class=\"card-img-top img-fluid\" alt=\"product_img\" style=\"background-position: center center; object-fit: cover;\">\r\n              <div class=\"overlay\">\r\n                <div class=\"text\">查看更多</div>\r\n              </div>\r\n            </div>\r\n            <div class=\"card-body\">\r\n              <h3 class=\"card-title\">{{ item.title }}</h3>\r\n              <del class=\"h6\">原價： {{ item.origin_price }} 元</del>\r\n              <p class=\"text-danger h4\">優惠價： {{ item.price }} 元</p>\r\n              <button type=\"button\" class=\"btn btn-primary\" @click=\"addCart(item.id)\">加入購物車</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <pagination :pagination=\"pagination\" @get-products=\"getProducts\"></pagination>\r\n</template>\r\n\r\n<style>\r\n.card-img-top{\r\n  height: 200px;\r\n}\r\n.image{\r\n  position: relative;\r\n}\r\n\r\n.image:hover .overlay{\r\n  opacity: 0.5;\r\n  cursor: pointer;\r\n}\r\n\r\n.overlay {\r\n  position: absolute;\r\n  top: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  opacity: 0;\r\n  transition: .5s ease-in;\r\n  background-color: #000;\r\n}\r\n\r\n.text {\r\n  color: white;\r\n  font-size: 20px;\r\n  font-weight: bold;\r\n  position: absolute;\r\n  bottom: 0;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n  text-align: center;\r\n}\r\n</style>\r\n\r\n<script>\r\nimport swal from 'sweetalert'\r\nimport pagination from '../components/Pagination.vue'\r\nimport bus from '../components/bus'\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      products: [],\r\n      pagination: {},\r\n      isLoading: false\r\n    }\r\n  },\r\n  components: { pagination },\r\n  methods: {\r\n    getProducts (page = 1) {\r\n      this.isLoading = true\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products?page=${page}`\r\n      this.$http.get(url)\r\n        .then((res) => {\r\n          if (res.data.success) {\r\n            this.products = res.data.products\r\n            this.pagination = res.data.pagination\r\n            return this.$http.get(`${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`)\r\n          }\r\n        })\r\n        .then((res) => {\r\n          if (res.data.success) {\r\n            this.isLoading = false\r\n            bus.emit('cart-number', res.data.data.carts.length)\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.log(err)\r\n        })\r\n    },\r\n    goToProduct (id) {\r\n      this.$router.push(`/products/${id}`)\r\n    },\r\n    addCart (id) {\r\n      this.isLoading = true\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`\r\n      this.$http.post(url, { data: { product_id: id, qty: 1 } })\r\n        .then((res) => {\r\n          if (res.data.success) {\r\n            swal({\r\n              text: '已加入購物車',\r\n              icon: 'success',\r\n              buttons: false,\r\n              timer: 1000\r\n            })\r\n            return this.$http.get(`${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`)\r\n          }\r\n        })\r\n        .then((res) => {\r\n          if (res.data.success) {\r\n            this.isLoading = false\r\n            bus.emit('cart-number', res.data.data.carts.length)\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.log(err)\r\n        })\r\n    }\r\n  },\r\n  created () {\r\n    this.getProducts()\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./Products.vue?vue&type=template&id=95e99e60\"\nimport script from \"./Products.vue?vue&type=script&lang=js\"\nexport * from \"./Products.vue?vue&type=script&lang=js\"\n\nimport \"./Products.vue?vue&type=style&index=0&id=95e99e60&lang=css\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}