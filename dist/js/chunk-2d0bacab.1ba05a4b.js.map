{"version":3,"sources":["webpack:///./src/views/Carts.vue","webpack:///./src/views/Carts.vue?bb48"],"names":["class","style","role","scope","width","colspan","carts","length","type","deleteAllCart","active","isLoading","cart","key","product_id","deleteCart","id","src","product","imageUrl","alt","height","title","disabled","qty","updateCart","min","final_total","goToOrder","data","methods","getCart","this","url","$http","get","then","res","success","delete","text","buttons","timer","setTimeout","$router","push","value","put","icon","mounted","render"],"mappings":"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","file":"js/chunk-2d0bacab.1ba05a4b.js","sourcesContent":["<template>\r\n  <div class=\"container py-5\">\r\n    <ol class=\"form-row text-center pl-0 d-flex\" style=\"list-style: none;\">\r\n      <li class=\"col-12 col-md-4\">\r\n        <div class=\"alert alert-info rounded-pill mb-0 \" role=\"alert\">\r\n            1.輸入訂購資料\r\n        </div>\r\n      </li>\r\n      <li class=\"col-12 col-md-4\">\r\n        <div class=\"alert alert-light rounded-pill mb-0 \" role=\"alert\">\r\n          2.金流付款\r\n        </div>\r\n      </li>\r\n      <li class=\"col-12 col-md-4\">\r\n        <div class=\"alert alert-light rounded-pill mb-0\" role=\"alert\">\r\n            3.完成\r\n        </div>\r\n      </li>\r\n    </ol>\r\n  </div>\r\n  <h1 class=\"text-center text-secondary my-3\">購物車列表</h1>\r\n  <button type=\"button\" class=\"btn btn-danger mb-3\" @click=\"deleteAllCart\" v-if=\"carts.carts && carts.carts.length >= 2\">刪除所有商品</button>\r\n  <loading :active=\"isLoading\"></loading>\r\n  <table class=\"table\">\r\n    <thead>\r\n      <tr class=\"text-center\">\r\n        <th scope=\"col\" width=\"10%\"></th>\r\n        <th scope=\"col\" width=\"20%\">商品圖片</th>\r\n        <th scope=\"col\">商品名稱</th>\r\n        <th scope=\"col\" width=\"15%\">商品數量</th>\r\n        <th scope=\"col\">商品價格</th>\r\n      </tr>\r\n    </thead>\r\n    <tbody v-if=\"carts.carts && carts.carts.length ===0\">\r\n      <tr>\r\n        <td colspan=\"5\" class=\"text-center py-5\">購物車是空的唷！</td>\r\n      </tr>\r\n    </tbody>\r\n    <template v-else>\r\n      <tbody>\r\n        <tr v-for=\"cart in carts.carts\" :key=\"cart.product_id\" class=\"align-middle\">\r\n          <td class=\"text-center\"><button type=\"button\" class=\"btn btn-outline-danger\" @click=\"deleteCart(cart.id)\">刪除</button></td>\r\n          <td class=\"text-center\"><img :src=\"cart.product.imageUrl\" alt=\"pic\" class=\"img-fiuld\" style=\"background-position: center center; object-fit: cover;\" width=\"200\" height=\"100\"></td>\r\n          <td>{{ cart.product.title }}</td>\r\n          <td>\r\n            <div class=\"input-group mb-3\">\r\n              <button class=\"btn btn-outline-secondary shadow-none\" type=\"button\" :disabled=\"cart.qty <= 1\" @click=\"updateCart(cart, 'minus')\"> - </button>\r\n              <input type=\"number\" min=\"1\" class=\"form-control\" disabled v-model=\"cart.qty\">\r\n              <button class=\"btn btn-outline-secondary shadow-none\" type=\"button\" @click=\"updateCart(cart, 'plus')\"> + </button>\r\n            </div>\r\n          </td>\r\n          <td class=\"text-end\">{{ cart.final_total }}</td>\r\n        </tr>\r\n      </tbody>\r\n      <tfoot>\r\n        <tr class=\"h4\">\r\n          <td colspan=\"4\" class=\"text-end\">總金額：</td>\r\n          <td class=\"text-end\">{{ carts.final_total}}</td>\r\n        </tr>\r\n      </tfoot>\r\n    </template>\r\n  </table>\r\n  <div class=\"d-flex justify-content-end\">\r\n    <button type=\"button\" class=\"btn btn-primary btn-lg\" @click=\"goToOrder\">確認訂購</button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport swal from 'sweetalert'\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      carts: [],\r\n      isLoading: false\r\n    }\r\n  },\r\n  methods: {\r\n    getCart () {\r\n      this.isLoading = true\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`\r\n      this.$http.get(url).then((res) => {\r\n        if (res.data.success) {\r\n          this.carts = res.data.data\r\n          this.isLoading = false\r\n        }\r\n      })\r\n    },\r\n    deleteCart (id) {\r\n      this.isLoading = true\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${id}`\r\n      this.$http.delete(url).then((res) => {\r\n        if (res.data.success) {\r\n          this.getCart()\r\n          this.isLoading = false\r\n          swal({\r\n            text: '商品刪除囉~',\r\n            buttons: false,\r\n            timer: 1000\r\n          })\r\n        }\r\n      })\r\n    },\r\n    deleteAllCart () {\r\n      this.isLoading = true\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/carts`\r\n      this.$http.delete(url).then((res) => {\r\n        if (res.data.success) {\r\n          this.getCart()\r\n          this.isLoading = false\r\n          swal({\r\n            text: '購物車清空囉！~',\r\n            buttons: false,\r\n            timer: 1000\r\n          })\r\n          setTimeout(() => {\r\n            this.$router.push('/products')\r\n          }, 1000)\r\n        }\r\n      })\r\n    },\r\n    updateCart (cart, value) {\r\n      if (value === 'minus') {\r\n        cart.qty -= 1\r\n      } else if (value === 'plus') {\r\n        cart.qty += 1\r\n      }\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${cart.id}`\r\n      this.$http.put(url, { data: { product_id: cart.id, qty: cart.qty } })\r\n        .then((res) => {\r\n          if (res.data.success) {\r\n            this.getCart()\r\n          }\r\n        })\r\n    },\r\n    goToOrder () {\r\n      if (this.carts.carts && this.carts.carts.length === 0) {\r\n        swal({\r\n          text: '購物車不能是空的唷！~',\r\n          icon: 'error',\r\n          buttons: false,\r\n          timer: 2000\r\n        })\r\n        setTimeout(() => {\r\n          this.$router.push('/products')\r\n        }, 1000)\r\n        return\r\n      }\r\n      this.$router.push('/orders')\r\n    }\r\n  },\r\n  mounted () {\r\n    this.getCart()\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./Carts.vue?vue&type=template&id=158e918c\"\nimport script from \"./Carts.vue?vue&type=script&lang=js\"\nexport * from \"./Carts.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}