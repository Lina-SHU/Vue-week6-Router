(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-947f2f7e"],{1799:function(t,e,c){"use strict";var n=c("7a23"),a={class:"container my-2"},o={class:"pagination justify-content-center"};function i(t,e,c,i,r,s){return Object(n["openBlock"])(),Object(n["createBlock"])("div",a,[Object(n["createVNode"])("nav",null,[Object(n["createVNode"])("ul",o,[Object(n["createVNode"])("li",{class:["page-item",{disabled:!r.pages.has_pre}]},[Object(n["createVNode"])("button",{class:"page-link",onClick:e[1]||(e[1]=Object(n["withModifiers"])((function(e){return t.$emit("getProducts",r.pages.current_page-1)}),["prevent"]))},"上一頁")],2),(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(r.pages.total_pages,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])("li",{class:["page-item",{active:e===r.pages.current_page}],key:e},[Object(n["createVNode"])("button",{class:"page-link",onClick:Object(n["withModifiers"])((function(c){return t.$emit("getProducts",e)}),["prevent"])},Object(n["toDisplayString"])(e),9,["onClick"])],2)})),128)),Object(n["createVNode"])("li",{class:["page-item",{disabled:!r.pages.has_next}]},[Object(n["createVNode"])("button",{class:"page-link",onClick:e[2]||(e[2]=Object(n["withModifiers"])((function(e){return t.$emit("getProducts",r.pages.current_page+1)}),["prevent"]))},"下一頁")],2)])])])}var r={props:["pagination"],data:function(){return{pages:{}}},watch:{pagination:function(){this.pages=this.pagination}}};r.render=i;e["a"]=r},"814a":function(t,e,c){},"82b3":function(t,e,c){"use strict";c("814a")},"83c5":function(t,e,c){"use strict";var n=function(t){return{all:t=t||new Map,on:function(e,c){var n=t.get(e);n&&n.push(c)||t.set(e,[c])},off:function(e,c){var n=t.get(e);n&&n.splice(n.indexOf(c)>>>0,1)},emit:function(e,c){(t.get(e)||[]).slice().map((function(t){t(c)})),(t.get("*")||[]).slice().map((function(t){t(e,c)}))}}};e["a"]=n()},e6dc:function(t,e,c){"use strict";c.r(e);var n=c("7a23"),a={class:"container"},o={class:"row mt-5"},i={class:"d-flex justify-content-center"},r={class:"card",style:{width:"18rem"}},s=Object(n["createVNode"])("div",{class:"overlay"},[Object(n["createVNode"])("div",{class:"text"},"查看更多")],-1),u={class:"card-body"},d={class:"card-title"},l={class:"h6"},p={class:"text-danger h4"};function g(t,e,c,g,b,h){var f=Object(n["resolveComponent"])("loading"),j=Object(n["resolveComponent"])("pagination");return Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],null,[Object(n["createVNode"])(f,{active:b.isLoading},null,8,["active"]),Object(n["createVNode"])("div",a,[Object(n["createVNode"])("div",o,[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(b.products,(function(t){return Object(n["openBlock"])(),Object(n["createBlock"])("div",{class:"col-md-4 col-lg-3 mb-3",key:t.id},[Object(n["createVNode"])("div",i,[Object(n["createVNode"])("div",r,[Object(n["createVNode"])("div",{class:"image",onClick:function(e){return h.goToProduct(t.id)}},[Object(n["createVNode"])("img",{src:t.imageUrl,class:"card-img-top img-fluid",alt:"product_img",style:{"background-position":"center center","object-fit":"cover"}},null,8,["src"]),s],8,["onClick"]),Object(n["createVNode"])("div",u,[Object(n["createVNode"])("h3",d,Object(n["toDisplayString"])(t.title),1),Object(n["createVNode"])("del",l,"原價： "+Object(n["toDisplayString"])(t.origin_price)+" 元",1),Object(n["createVNode"])("p",p,"優惠價： "+Object(n["toDisplayString"])(t.price)+" 元",1),Object(n["createVNode"])("button",{type:"button",class:"btn btn-primary",onClick:function(e){return h.addCart(t.id)}},"加入購物車",8,["onClick"])])])])])})),128))])]),Object(n["createVNode"])(j,{pagination:b.pagination,onGetProducts:h.getProducts},null,8,["pagination","onGetProducts"])],64)}c("99af");var b=c("1940"),h=c.n(b),f=c("1799"),j=c("83c5"),O={data:function(){return{products:[],pagination:{},isLoading:!1}},components:{pagination:f["a"]},methods:{getProducts:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("linachen","/products?page=").concat(e);this.$http.get(c).then((function(e){if(e.data.success)return t.products=e.data.products,t.pagination=e.data.pagination,t.$http.get("".concat("https://vue3-course-api.hexschool.io/","api/").concat("linachen","/cart"))})).then((function(e){e.data.success&&(t.isLoading=!1,j["a"].emit("cart-number",e.data.data.carts.length))})).catch((function(t){console.log(t)}))},goToProduct:function(t){this.$router.push("/products/".concat(t))},addCart:function(t){var e=this;this.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("linachen","/cart");this.$http.post(c,{data:{product_id:t,qty:1}}).then((function(t){if(t.data.success)return h()({text:"已加入購物車",icon:"success",buttons:!1,timer:1e3}),e.$http.get("".concat("https://vue3-course-api.hexschool.io/","api/").concat("linachen","/cart"))})).then((function(t){t.data.success&&(e.isLoading=!1,j["a"].emit("cart-number",t.data.data.carts.length))})).catch((function(t){console.log(t)}))}},created:function(){this.getProducts()}};c("82b3");O.render=g;e["default"]=O}}]);
//# sourceMappingURL=chunk-947f2f7e.5f247b0e.js.map